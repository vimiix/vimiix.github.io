<!doctype html><html lang=cn-zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><style type=text/css>body{font-family:monospace}</style><title>Python|内建函数getattr()函数详解</title><meta name=description content="A blog maintained by Vimiix."><link rel=stylesheet href=/css/style.css></head><body><header>====================<br>== Hi, I'm Vimiix ==<br>====================<div style=float:right>Practice makes perfect (ง •̀_•́)ง</div><br><p><nav><a href=https://www.vimiix.com/><b>首页</b></a>.
<a href=/posts/><b>文章列表</b></a>.
<a href=/categories/><b>分类</b></a>.
<a href=/tags/><b>标签</b></a>.
<a href=/friends/><b>友链</b></a>.
<a href=/about/><b>关于</b></a>.
<a href=/index.xml><b>RSS</b></a>.</nav></p></header><main><article><h1>Python|内建函数getattr()函数详解</h1><b><time>2017.07.10 12:08</time></b>
<a href=/%20/tags/python>Python</a>
<a href=/%20/tags/getattr>getattr</a><div><h2 id=前言>前言</h2><p>昨天在<a href=https://www.hackerrank.com>Hackerrank</a>上面练习 Python 题目的时候，题目要求从终端输入命令和参数，然后脚本获取到以后执行相应的操作（<a href=https://www.hackerrank.com/challenges/py-set-discard-remove-pop>查看原题</a>），作为初级程序员，我第一思路想到的解法就是枚举（因为题目上面限制了就 3 条命令）。通过<code>if ... elif...elif...</code>的分支语句就解决了。Hackerrank 有一个好处就是，每一个题目都有一个讨论区，在讨论区中往往会有超出本人能力范围的巧妙高级解法发表在里面。有个大牛在讨论区发表了自己的解法，其中就用到了 getattr 这个内建函数，这样代码的扩展性就极强了，不再局限于本题目的三条指令。下面就记录一下这个有趣的函数。</p><blockquote><p><a href=http://t.cn/RKtqwu4>上述代码查看传送门</a></p></blockquote><h2 id=记录>记录</h2><p>getattr 是 python 里的一个内建函数,先看定义</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python>	<span style=color:#f92672>&gt;&gt;&gt;</span> help(getattr)
	Help on built<span style=color:#f92672>-</span><span style=color:#f92672>in</span> function getattr <span style=color:#f92672>in</span> module __builtin__:

	getattr(<span style=color:#f92672>...</span>)
	    getattr(object, name[, default]) <span style=color:#f92672>-&gt;</span> value

	    Get a named attribute <span style=color:#f92672>from</span> an object; getattr(x, <span style=color:#e6db74>&#39;y&#39;</span>) <span style=color:#f92672>is</span> equivalent to x<span style=color:#f92672>.</span>y<span style=color:#f92672>.</span>
	    When a default argument <span style=color:#f92672>is</span> given, it <span style=color:#f92672>is</span> returned when the attribute doesn<span style=color:#e6db74>&#39;t</span>
	    exist; without it, an exception <span style=color:#f92672>is</span> raised <span style=color:#f92672>in</span> that case<span style=color:#f92672>.</span>

	<span style=color:#f92672>&gt;&gt;&gt;</span>
</code></pre></div><p>getattr()的三个参数：</p><ul><li>object : 要实例化的对象</li><li>name ： 要执行的命令操作</li><li>default :（可省略参数）当要执行的命令操作不存在是，会返回这里传入的 default</li></ul><p>getattr()主要的作用是通过传入字符串的方式，来动态的获取方法的实例。这个函数最大的用处在于函数解耦，可以讲一些可能会调用的方法，写到一个配置文件中，在需要的时候动态加载。</p><p>解释的比较抽象，简单来说：<code>getattr(object, name)</code> 等价于 <code>object.name</code></p><p>下面通过代码说明一下</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python>	<span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(t):
	    c, <span style=color:#f92672>*</span>args <span style=color:#f92672>=</span> map(str,input()<span style=color:#f92672>.</span>split())
	    getattr(s,c) (<span style=color:#f92672>*</span>(int(x) <span style=color:#66d9ef>for</span> x <span style=color:#f92672>in</span> args))
</code></pre></div><p>这段代码实现了用户从<code>stdin</code>输入命令和参数，命令赋值给了<code>c</code>，参数传给了一个指针变量<code>*args</code>,这里使用<code>*args</code>是为了接收不确定个数的参数。然后调用<code>getattr(s,c)</code>来执行<code>c</code>这条指令（注：<code>s</code>是一串字符串），此处<code>getattr(s,c)</code>就可以等价于<code>s.c</code>,后面括号内<code>(*(int(x) for x in args))</code>,这里是一个生成器表达式，这部分称为参数解包，它类似于如何定义具有任意数量（位置）参数的函数 &mdash; <code>*</code>在序列之前将遍历序列并将其成员变为函数调用参数。</p><p>可以看出，这样的用法比枚举的思路方便了很多，也具有更高的扩展性。</p><h2 id=延伸>延伸</h2><p>Python 中和 getattr 相关的还有<code>hasattr</code>、<code>setattr</code>、<code>delattr</code>，通过举例了解一下。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python>	<span style=color:#75715e>#定义一个类对象</span>
	<span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Vimiix</span>:
		<span style=color:#66d9ef>def</span> __init__(self):
			self<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;vimiix&#39;</span>
		<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>setName</span>(self, name):
			self<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> name
		<span style=color:#66d9ef>def</span> <span style=color:#a6e22e>getName</span>(self):
			<span style=color:#66d9ef>return</span> self<span style=color:#f92672>.</span>name

	<span style=color:#75715e>#实例化对象</span>
	foo <span style=color:#f92672>=</span> Vimiix()
</code></pre></div><h5 id=hasattrobject-name-判断-object-是否具有-name-属性>hasattr(object, name) 判断 object 是否具有 name 属性</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python>	<span style=color:#f92672>&gt;&gt;&gt;</span>hasattr(foo,<span style=color:#e6db74>&#39;getName&#39;</span>)

	True
</code></pre></div><h5 id=setattrobjectnamedefault-设置一个新的属性并赋予值类似-fooage--18>setattr(object,name,default) 设置一个新的属性，并赋予值.类似 foo.age = 18</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python>	<span style=color:#f92672>&gt;&gt;&gt;</span>setattr(foo, <span style=color:#e6db74>&#39;age&#39;</span>, <span style=color:#e6db74>&#39;18&#39;</span>)
</code></pre></div><h5 id=delattrobject-name-删除-object-对象的-name-属性>delattr(object, name) 删除 object 对象的 name 属性</h5><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Python data-lang=Python>	<span style=color:#f92672>&gt;&gt;&gt;</span>delattr(foo, <span style=color:#e6db74>&#39;age&#39;</span>)
	<span style=color:#f92672>&gt;&gt;&gt;</span>getattr(foo, <span style=color:#e6db74>&#39;age&#39;</span>, <span style=color:#e6db74>&#39;Not find&#39;</span>)

	<span style=color:#e6db74>&#39;Not find&#39;</span>
</code></pre></div></div></article></main><aside><div><div><h3>LATEST POSTS</h3></div><div><ul><li><a href=/posts/2021-03-22-auth-windows-user-in-golang/>Golang实现Windows系统用户和密码校验</a></li><li><a href=/posts/2020-03-11-beanstalkd-note/>beanstalkd消息队列</a></li><li><a href=/posts/2020-02-21-richardson-model/>[译]Richardson成熟度模型</a></li><li><a href=/posts/2019-11-13-google-rtb-price-in-golang/>Golang实现Google在RTB广告中价格加密方案</a></li><li><a href=/posts/2019-09-05-mac-sierra-mvim-error/>Mac 升级10.12.6 mvim 打开文件报错</a></li></ul></div></div></aside><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://www.vimiix.com/posts/2017-07-10-introduce-getattr-function/",this.page.identifier="/posts/2017-07-10-introduce-getattr-function/"};(function(){var a=document,b=a.createElement('script');b.src='https://vimiix-blog.disqus.com/embed.js',b.setAttribute('data-timestamp',+new Date),(a.head||a.body).appendChild(b)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><footer><p><a href=https://github.com/vimiix><b>Github</b></a>.
<a href=https://www.douban.com/people/vimiix/><b>Douban</b></a>.
<a href=mailto:i@vimiix.com><b>Email</b></a>.<br>&copy; 2021
Copyright (c) 2017-2021, Vimiix Yao; All rights reserved.
<a href=https://beian.miit.gov.cn/>京ICP备19015214号-1</a></p></footer></body></html>