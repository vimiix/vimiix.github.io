<!doctype html><html lang=cn-zh><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><style type=text/css>body{font-family:monospace}</style><title>vmx-manager:基于django框架开发的cmdb系统</title><meta name=description content="A blog maintained by Vimiix."><link rel=stylesheet href=/css/style.css></head><body><header>====================<br>== Hi, I'm Vimiix ==<br>====================<div style=float:right>Practice makes perfect (ง •̀_•́)ง</div><br><p><nav><a href=https://www.vimiix.com/><b>首页</b></a>.
<a href=/posts/><b>文章列表</b></a>.
<a href=/categories/><b>分类</b></a>.
<a href=/tags/><b>标签</b></a>.
<a href=/friends/><b>友链</b></a>.
<a href=/about/><b>关于</b></a>.
<a href=/index.xml><b>RSS</b></a>.</nav></p></header><main><article><h1>vmx-manager:基于django框架开发的cmdb系统</h1><b><time>2017.07.18 22:58</time></b>
<a href=/%20/tags/django>Django</a>
<a href=/%20/tags/python>Python</a>
<a href=/%20/tags/cmdb>cmdb</a>
| <a class=disqus-comment-count href=/posts/2017-07-18-vmx-manager-a-cmdb-system-base-on-django/#disqus_thread></a><div><h2 id=系统介绍>系统介绍</h2><p>VMX-Manager 是一个基于 Django 框架开发的一款 CMDB 管理系统，目前处于 beta 版本，功能主要包含: 管理系统管理的客户主机列表， 动态显示客户机状态信息，远程指令操作指定客户机以及主机与客户机之间的文件传输。</p><h6 id=注vmx-取自作者昵称vimiix缩写>注：VMX 取自作者昵称<code>Vimiix</code>缩写</h6><h2 id=功能描述>功能描述：</h2><ol><li>云主机的信息统计</li><li>数据的动态展示</li><li>远程指令控制</li><li>文件传输</li></ol><h2 id=开发环境>开发环境</h2><ul><li>win10</li><li>python2.7</li><li>Django1.11.1</li><li>paramiko2.2.1</li><li>Sqlite3</li></ul><h2 id=整体架构>整体架构</h2><p><figure><img src=http://vimiix-blog.oss-cn-qingdao.aliyuncs.com/flow.png alt></figure></p><h2 id=使用说明及展示>使用说明及展示</h2><h6 id=_注本次使用说明基于在本地-ip-端口直接访问http1270018000即可_><em>注：本次使用说明基于在本地 IP 端口，直接访问<code>http://127.0.0.1:8000</code>即可</em></h6><h3 id=开启系统>开启系统</h3><p>第一种方法：</p><ul><li>命令行切换到项目的根目录（<code>/vmx_manager</code>）下,执行命令<code>python manager.py runserver 0.0.0.0:8000</code> ，这里让系统启动并设置 IP 为<code>0.0.0.0</code>目的是可以让客户端主机访问。</li></ul><p>第二种方法：</p><ul><li>直接将本项目导入 pycharm,运行启动项目即可。</li></ul><h3 id=管理员注册>管理员注册</h3><p>新人访问系统，需首先注册一个管理员账号，注册地址:<code>http://127.0.0.1:8000/manager/register/</code></p><p><figure><img src=http://vimiix-blog.oss-cn-qingdao.aliyuncs.com/register.png alt></figure></p><h3 id=登录>登录</h3><p>注册成功以后，会自动跳转至登录页面，用刚才注册的账号登录即可。</p><p>若不想注册，直接使用此账号登陆：</p><ul><li>账号：<code>admin</code></li><li>密码：<code>123456</code></li></ul><p><figure><img src=http://vimiix-blog.oss-cn-qingdao.aliyuncs.com/vmx-manager-login.png alt></figure></p><p>进入首页，可以看到本系统的基本介绍和功能选择界面</p><p><figure><img src=http://vimiix-blog.oss-cn-qingdao.aliyuncs.com/index.png alt></figure></p><p>自登录进来以后，会自动保存管理员信息在本地 cookie 中，有效期是 1 小时，也就是说 1 小时以后，系统会要求管理员重新登录，否则自动退出。</p><p>下面就依次介绍每个功能</p><h3 id=主机列表>主机列表</h3><p>在这个页面，展示了目前已经在管理的客户主机信息,其中包含<code>主机的IP</code>，<code>自定义名称</code>，<code>操作系统</code>，<code>CPU型号</code>，以及<code>最近的一次重启时间</code>。</p><p><figure><img src=http://vimiix-blog.oss-cn-qingdao.aliyuncs.com/host.png alt></figure></p><p>在这个页面，管理员可以直接操作删除目前管理的客户主机，将不再对其监控。也可以添加一个新的主机进来，点击<code>新增</code>按钮，跳转至添加页面，将要添加的主机 IP，可以管理员信息填写进去，系统会自动去读取要管理的主机相关信息，并保存到数据库，添加成功弹窗提示，点击<code>确定</code>返回到主机列表，此时会看到新添加成功的主机。</p><p><figure><img src=http://vimiix-blog.oss-cn-qingdao.aliyuncs.com/add_host.png alt></figure></p><h3 id=动态信息>动态信息</h3><p>这个页面作了一个信息动态的展示，因为要想显示更多的信息，只是在脚本中，去多读取一些信息，发送回来，分图表去展示，这里目前只收集到一个客户机发送上来的 CPU 信息用来做例子展示。</p><p><figure><img src=http://vimiix-blog.oss-cn-qingdao.aliyuncs.com/cpu.png alt></figure></p><blockquote><p>这个页面想要看到数据的动态变化，需要讲本项目根目录下的<code>sendData.py</code>文件打开，配置好服务器的 IP(比如我 win10 的 IP 是<code>192.168.1.109</code>)，并使用一会儿要说到的第四个文件分发功能将这个文件，下发到客户机上去运行起来。这样就会在这个页面看到对应客户主机的动态信息。</p></blockquote><h3 id=远程指令>远程指令</h3><p>在这个页面有两个功能：</p><ol><li>给指定远程主机发生指令，并获取执行结果</li><li>查看最近执行成功的 8 条指令</li></ol><h5 id=发送指令>发送指令</h5><p>下面的例子中，我向我的 AWS 云主机发送了一条指令<code>ls /home/ec2-user</code>，查看我的用户目录下的文件信息,右边的黑色框中回显了收到的信息。若链接主机失败，会在右侧的显示框，提示链接不成功。<figure><img src=http://vimiix-blog.oss-cn-qingdao.aliyuncs.com/remote.png alt></figure></p><h4 id=发送指令历史>发送指令历史</h4><p>点击<code>发送历史</code>按钮，会在右侧框中显示历史纪录，格式为：<code>发送时间>>发送指令>>远程主机IP</code></p><p><figure><img src=http://vimiix-blog.oss-cn-qingdao.aliyuncs.com/history.png alt></figure></p><h3 id=文件传输>文件传输</h3><p>这个页面同样也是有两个功能：：</p><ol><li>向服务器上传文件</li><li>向指定 IP 的远程主机，分发文件</li></ol><p>成功则在本页面提示发送成功，失败提示发送失败</p><p>具体使用请参考下面的图片：</p><h5 id=上传文件>上传文件</h5><p>上传成功以后，会保存在项目根目录下的<code>upload</code>中。</p><p><figure><img src=http://vimiix-blog.oss-cn-qingdao.aliyuncs.com/upload.png alt></figure></p><h5 id=分发文件>分发文件</h5><p><figure><img src=http://vimiix-blog.oss-cn-qingdao.aliyuncs.com/put.png alt></figure></p><p>我们到<code>192.168.59.129</code>这个 IP 的主机中去看一下，文件是否发送成功？</p><p><figure><img src=http://vimiix-blog.oss-cn-qingdao.aliyuncs.com/verify.png alt></figure></p><p>从上图可以看出，主机 IP<code>192.168.59.129</code>成功接收到了我们刚刚从 win10 发送的<code>requirements.txt</code>的文件。</p><h3 id=写在最后>写在最后</h3><p>这个系统不能算成熟的产品，因为其中很多功能其实可以用更好的方式去优化实现。但是，这是一次很有收获的经历。在写专注的写代码的三天中，从前端到后端到数据库，遇到了不计其数的坑，但都通过自己不断的 google,思考，优化，一步一步的都解决了。希望自己一如既往的保持一颗求知的心，去不断的探索新的知识，大胆的尝试，勇敢的试错，跨过去一道坎的心情是难以在黎明前去阐述的，小小感慨，聊以自勉。</p><h3 id=end>End</h3><p>See project at <a href=https://github.com/vimiix/vmx_manager>https://github.com/vimiix/vmx_manager</a></p></div></article></main><aside><div><div><h3>LATEST POSTS</h3></div><div><ul><li><a href=/posts/2021-03-22-auth-windows-user-in-golang/>Golang实现Windows系统用户和密码校验</a></li><li><a href=/posts/2020-03-11-beanstalkd-note/>beanstalkd消息队列</a></li><li><a href=/posts/2020-02-21-richardson-model/>[译]Richardson成熟度模型</a></li><li><a href=/posts/2019-11-13-google-rtb-price-in-golang/>Golang实现Google在RTB广告中价格加密方案</a></li><li><a href=/posts/2019-09-05-mac-sierra-mvim-error/>Mac 升级10.12.6 mvim 打开文件报错</a></li></ul></div></div></aside><div id=disqus_thread></div><script>var disqus_config=function(){this.page.url="https://www.vimiix.com/posts/2017-07-18-vmx-manager-a-cmdb-system-base-on-django/",this.page.identifier="/posts/2017-07-18-vmx-manager-a-cmdb-system-base-on-django/"};(function(){var a=document,b=a.createElement('script');b.src='https://vimiix-blog.disqus.com/embed.js',b.setAttribute('data-timestamp',+new Date),(a.head||a.body).appendChild(b)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><script id=dsq-count-scr src=//vimiix-blog.disqus.com/count.js async></script><footer><p><a href=https://github.com/vimiix><b>Github</b></a>.
<a href=https://www.douban.com/people/vimiix/><b>Douban</b></a>.
<a href=mailto:i@vimiix.com><b>Email</b></a>.<br>&copy; 2021
Copyright (c) 2017-2021, Vimiix Yao; All rights reserved.
<a href=https://beian.miit.gov.cn/>京ICP备19015214号-1</a></p></footer></body></html>